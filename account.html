<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WorkHub - Project Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-2xl font-bold text-green-600 mb-4">Project Transactions</h1>
    <div id="projectList" class="space-y-4"></div>
  </div>

  <!-- Audio for notification -->
  <audio id="notificationSound" src="https://notificationsounds.com/storage/sounds/file-sounds-1152-pristine.mp3" preload="auto"></audio>

  <script>
    const dummyTasks = [
      { id: "T001", amount: 30, date: "2025-05-15", status: "Payment not verified yet" },
      { id: "T002", amount: 45, date: "2025-05-14", status: "Payment not verified yet" },
      { id: "T003", amount: 60, date: "2025-05-13", status: "Payment not verified yet" }
    ];

    let paidTasks = JSON.parse(localStorage.getItem('paidTasks') || '[]');

    const projectList = document.getElementById('projectList');
    const notificationSound = document.getElementById('notificationSound');

    function renderTasks() {
      projectList.innerHTML = '';
      dummyTasks.forEach(task => {
        const paid = paidTasks.find(t => t.id === task.id);
        const status = paid ? 'Paid' : task.status;

        const taskDiv = document.createElement('div');
        taskDiv.className = 'bg-white p-4 rounded-lg shadow flex justify-between items-center';
        taskDiv.innerHTML = `
          <div>
            <p class="font-semibold text-gray-800">Task ID: ${task.id}</p>
            <p class="text-sm text-gray-500">Amount: $${task.amount.toFixed(2)} | Date: ${task.date}</p>
            <p class="text-xs mt-1 ${paid ? 'text-green-600' : 'text-red-500'} status-${task.id}">${status}</p>
          </div>
          <button onclick="verifyTask('${task.id}', ${task.amount}, '${task.date}')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
            Verify
          </button>
        `;
        projectList.appendChild(taskDiv);
      });
    }

    function verifyTask(id, amount, date) {
      const code = prompt("Enter verification code to confirm payment:");
      if (code === "1234") {
        const timeNow = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

        const newTask = { id, amount, date, time: timeNow };
        paidTasks.push(newTask);
        localStorage.setItem('paidTasks', JSON.stringify(paidTasks));

        // Play notification sound
        notificationSound.play();

        // Update balance
        let balance = parseFloat(localStorage.getItem('balance') || '0');
        balance += amount;
        localStorage.setItem('balance', balance.toFixed(2));

        // Update status on screen
        const statusEl = document.querySelector(`.status-${id}`);
        if (statusEl) statusEl.textContent = 'Paid';
        statusEl.classList.remove('text-red-500');
        statusEl.classList.add('text-green-600');
      } else {
        alert("Incorrect verification code.");
      }
    }

    renderTasks();
  </script>
</body>
</html>
