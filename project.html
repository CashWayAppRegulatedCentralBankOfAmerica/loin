<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nova Prime | Your Bids</title>
  <link rel="icon" type="image/png" href="nova_favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #f3f4f6;
      font-family: sans-serif;
      padding-top: 64px; /* header height */
      padding-bottom: 64px; /* footer height */
    }
    header, footer {
      position: fixed;
      width: 100%;
      left: 0;
      background: white;
      box-shadow: 0 1px 4px rgb(0 0 0 / 0.1);
      z-index: 50;
      padding: 1rem 1.5rem;
    }
    header {
      top: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    footer {
      bottom: 0;
      text-align: center;
      font-size: 0.875rem;
      color: #6b7280;
    }
    main {
      max-width: 800px;
      margin: 0 auto;
      margin-top: 1rem;
    }
    .bid-card {
      background: white;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .bid-info {
      flex-grow: 1;
      min-width: 200px;
    }
    .bid-status {
      font-weight: 600;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      text-transform: uppercase;
      font-size: 0.75rem;
      margin-right: 1rem;
      white-space: nowrap;
    }
    .submitted {
      background-color: #16a34a;
      color: white;
    }
    .not-submitted {
      background-color: #f59e0b;
      color: white;
    }
    .submit-link {
      background-color: #10b981;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      text-decoration: none;
      font-weight: 600;
      transition: background-color 0.2s ease;
      white-space: nowrap;
    }
    .submit-link:hover {
      background-color: #059669;
    }
  </style>
</head>
<body>
  <header>
    <div class="text-xl font-bold text-green-600">Nova Prime</div>
  </header>

  <main>
    <h1 class="text-2xl font-bold text-green-600 mb-6">Your Bids</h1>
    <div id="bidsContainer">
      <!-- Bids will be rendered here -->
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Nova Prime Inc. All rights reserved.</p>
    <div class="space-x-4 mt-1">
      <a href="privacy.html" class="hover:text-green-600">Privacy</a>
      <a href="terms.html" class="hover:text-green-600">Terms</a>
      <a href="help.html" class="hover:text-green-600">Help</a>
    </div>
  </footer>

  <script>
    function renderBids() {
      const bids = JSON.parse(localStorage.getItem('bids') || '[]');
      const container = document.getElementById('bidsContainer');
      container.innerHTML = '';

      if (bids.length === 0) {
        container.innerHTML = '<p class="text-gray-500">No bids found.</p>';
        return;
      }

      bids.forEach((bid, index) => {
        // Create card container
        const card = document.createElement('div');
        card.className = 'bid-card';

        // Bid info
        const info = document.createElement('div');
        info.className = 'bid-info';
        info.innerHTML = `
          <div><strong>Task ID:</strong> ${bid.taskId}</div>
          <div><strong>Bid Amount:</strong> $${bid.amount}</div>
          <div><strong>Date:</strong> ${bid.date} ${bid.time}</div>
          <div><strong>Status:</strong> ${bid.status}</div>
        `;

        // Status badge
        const statusBadge = document.createElement('div');
        statusBadge.className = 'bid-status ' + (bid.submitted ? 'submitted' : 'not-submitted');
        statusBadge.textContent = bid.submitted ? 'Submitted' : 'Not Submitted';

        // Submit Task button or disabled label
        let submitAction;
        if (bid.submitted) {
          submitAction = document.createElement('span');
          submitAction.textContent = 'Task Submitted';
          submitAction.style.fontWeight = '600';
          submitAction.style.color = '#16a34a';
          submitAction.style.whiteSpace = 'nowrap';
        } else {
          submitAction = document.createElement('a');
          submitAction.href = `submit.html?taskId=${encodeURIComponent(bid.taskId)}&amount=${encodeURIComponent(bid.amount)}&index=${index}`;
          submitAction.textContent = 'Submit Task';
          submitAction.className = 'submit-link';
        }

        // Append all
        card.appendChild(info);
        card.appendChild(statusBadge);
        card.appendChild(submitAction);

        container.appendChild(card);
      });
    }

    document.addEventListener('DOMContentLoaded', renderBids);
  </script>
</body>
</html>
