<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Bids - WorkHub</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans min-h-screen p-6">
  <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-md p-6">
    <h1 class="text-2xl font-bold text-green-600 mb-6">My Bids</h1>

    <div id="bidsList" class="space-y-4"></div>
  </div>

  <script>
    const verifyCode = '1234';

    function renderBids() {
      const bidsList = document.getElementById('bidsList');
      bidsList.innerHTML = '';

      const bids = JSON.parse(localStorage.getItem('bids') || '[]');

      if (bids.length === 0) {
        bidsList.innerHTML = '<p class="text-gray-500 text-center">No bids placed yet.</p>';
        return;
      }

      bids.forEach((bid, index) => {
        const statusColor = bid.status === 'Paid' ? 'text-green-600' : 'text-yellow-600';
        const isPaid = bid.status === 'Paid';

        const bidHTML = `
          <div class="flex justify-between items-center border-b pb-3">
            <div>
              <p class="font-semibold">Task ID: ${bid.taskId}</p>
              <p class="text-sm text-gray-600">Amount: $${bid.amount}</p>
              <p class="text-sm text-gray-600">Date: ${bid.date} ${bid.time}</p>
              <p class="text-sm ${statusColor} font-medium mt-1">Status: ${bid.status}</p>
              ${bid.errorMsg ? `<p class="text-sm text-red-500 mt-1">${bid.errorMsg}</p>` : ''}
            </div>
            ${
              isPaid
              ? ''
              : `<button onclick="verifyBid(${index})" class="bg-green-600 hover:bg-green-700 text-white text-sm px-4 py-2 rounded">
                  Verify
                </button>`
            }
          </div>
        `;
        bidsList.innerHTML += bidHTML;
      });
    }

    function verifyBid(index) {
      const code = prompt('Enter payment verification code:');
      const bids = JSON.parse(localStorage.getItem('bids') || '[]');

      if (code === verifyCode) {
        bids[index].status = 'Paid';
        delete bids[index].errorMsg;
      } else {
        bids[index].errorMsg = 'Payment not verified yet';
      }

      localStorage.setItem('bids', JSON.stringify(bids));
      renderBids();
    }

    // Initial render
    renderBids();
  </script>
</body>
</html>
